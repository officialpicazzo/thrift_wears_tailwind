<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>ALLINONE_COLLECTIONS — Thrift Wears</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Paystack -->
  <script src="https://js.paystack.co/v1/inline.js"></script>

  <style>
    body {
      background: radial-gradient(circle at top left, #d4a5ff55, transparent),
                  radial-gradient(circle at top right, #a5d8ff55, transparent),
                  radial-gradient(circle at bottom left, #a5ffd655, transparent),
                  radial-gradient(circle at bottom right, #ffd6e055, transparent);
    }
  </style>
</head>
<body class="min-h-screen bg-white/60 antialiased overflow-x-hidden">


  <!-- HEADER -->
  <header class="sticky top-0 z-40 bg-white/70 backdrop-blur-sm border-b border-white/30">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-purple-400 to-teal-300 flex items-center justify-center text-white font-bold">AC</div>
        <div>
          <h1 class="text-lg font-semibold">ALLINONE_COLLECTIONS</h1>
          <p class="text-xs text-gray-600 -mt-1">More Thrift Selections</p>
        </div>
      </a>
      <button id="cartBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg shadow hover:scale-105 transition">
        Cart <span id="cartCount" class="ml-2 inline-block bg-white text-purple-600 px-2 py-0.5 rounded-full text-xs">0</span>
      </button>
    </div>
  </header>

  <!-- PRODUCTS -->
  <section class="max-w-6xl mx-auto px-4 py-10 text-center">
    <h2 class="text-3xl font-bold text-purple-800 mb-2">More Collections</h2>
    <p class="text-gray-700 mb-10">Explore more of our best-selling thrift wears and beauty products 💜</p>

    <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">


      <!-- SAMPLE PRODUCT -->

      <!-- Product 1 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/lk.jpeg" alt="Classy and unisex perfume combo" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Flare skirts</h4>
          <p class="text-indigo-600 font-bold mt-1">₦100</p>
    <div class="mt-3 flex flex-col sm:flex-row gap-2">
    <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Classy and unisex perfume combo"
                    data-price="100">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="₦100">Buy</button>
         </div>
        </div>
      </article>
      
      <!-- Product 2 -->
 <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/yk.jpeg" alt="Classy and unisex perfume combo" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Poly standard skirts</h4>
          <p class="text-indigo-600 font-bold mt-1">₦4000</p>
    <div class="mt-3 flex flex-col sm:flex-row gap-2">
    <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Poly standard skirts"
                    data-price="4000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="₦4000">Buy</button>
         </div>
        </div>
      </article>


      <!-- Product 3 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/ll.jpeg" alt="Simple skincare set" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Long sleeve body suits</h4>
          <p class="text-indigo-600 font-bold mt-1">₦3000</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Long sleeve body suits"
                    data-price="3000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="3000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 4 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/nn.jpeg" alt="50 ml matelot perfume" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Tank Tops </h4>
          <p class="text-indigo-600 font-bold mt-1">₦2,500 each</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Tank Tops"
                    data-price="2500">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="2500">Buy</button>
          </div>
        </div>
      </article>

       <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/bb.jpeg" alt="Classy and unisex perfume combo" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Scrunchies </h4>
          <p class="text-indigo-600 font-bold mt-1">₦500</p>
          <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Scrunchies"
                    data-price="500">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="500">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 2 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/s01.jpeg" alt="Nivea body lotion" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Yara lataffa sweet feminine combo</h4>
          <p class="text-indigo-600 font-bold mt-1">₦25,000</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Yara lataffa sweet feminine combo"
                    data-price="25000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="25000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 3 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/yk2.jpeg" alt="Simple skincare set" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Face Mask</h4>
          <p class="text-indigo-600 font-bold mt-1">₦1000 each</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Face Mask"
                    data-price="10000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="10000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 4 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/av.jpg" alt="50 ml matelot perfume" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Best selling Aventos mini spray</h4>
          <p class="text-indigo-600 font-bold mt-1">₦20,000</p>
     <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Best selling Aventos mini spray"
                    data-price="20000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="20000">Buy</button>
          </div>
        </div>
      </article>

      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/cb.jpg" alt="50 ml matelot perfume" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Feminine Combo </h4>
          <p class="text-indigo-600 font-bold mt-1">₦9000</p>
     <div class="mt-3 flex flex-col sm:flex-row gap-2">
  <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Feminine"
                    data-price="9000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="9000">Buy</button>
          </div>
        </div>
      </article>

       <!-- Product 2 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/fa.jpg" alt="Nivea body lotion" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Facial wipes <br>1000 each</h4>
          <p class="text-indigo-600 font-bold mt-1">₦1000</p>
          <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Facial wipes"
                    data-price="1000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="1000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 3 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/rw.jpg" alt="Simple skincare set" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Rose water for all skin types</h4>
          <p class="text-indigo-600 font-bold mt-1">₦4000</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Rose water for all skin types"
                    data-price="4000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="4000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 4 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/bm.jpg" alt="50 ml matelot perfume" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Body mist</h4>
          <p class="text-indigo-600 font-bold mt-1">₦3000</p>
          <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Body mist"
                    data-price="3000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="3000">Buy</button>
          </div>
        </div>
      </article>
       <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/wv.jpg" alt="Classy and unisex perfume combo" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Wave body mist 5000 each</h4>
          <p class="text-indigo-600 font-bold mt-1">₦5000</p>
          <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Wave body mist "
                    data-price="5000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="5000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 2 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/hs.jpg" alt="Nivea body lotion" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Hair scrunchies 1000 each big size</h4>
          <p class="text-indigo-600 font-bold mt-1">₦1000</p>
            <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Hair scrunchies"
                    data-price="1000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="1000">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 3 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/hb.jpg" alt="Simple skincare set" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">Hair band and small sized scrunchies</h4>
          <p class="text-indigo-600 font-bold mt-1">₦600</p>
          <div class="mt-3 flex flex-col sm:flex-row gap-2">

            <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="Hair band and small sized scrunchies"
                    data-price="600">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="600">Buy</button>
          </div>
        </div>
      </article>

      <!-- Product 4 -->
      <article class="bg-white/90 rounded-xl p-3 shadow hover:shadow-lg transition hover:-translate-y-1 flex flex-col">
        <div class="w-full h-48 overflow-hidden rounded-lg">
          <img src="imagess/ou.jpg" alt="50 ml matelot perfume" class="w-full h-full object-cover" />
        </div>
        <div class="mt-3">
          <h4 class="font-semibold text-sm">60ml bio oil for multi purpose use</h4>
          <p class="text-indigo-600 font-bold mt-1">₦10,000</p>
         <div class="mt-3 flex flex-col sm:flex-row gap-2">
        <button class="addToCartBtn flex-1 px-3 py-2 rounded-lg bg-emerald-500 text-white text-sm"
                    data-name="60ml bio oil for multi purpose us"
                    data-price="10000">Add to cart</button>
            <button class="buyNowBtn px-3 py-2 rounded-lg border text-sm" data-price="10000">Buy</button>
          </div>
        </div>
      </article>
      </div>

    <div class="mt-10">
      <a href="index.html" class="bg-purple-600 text-white px-6 py-3 rounded-lg shadow hover:scale-105 transition">← Back To Home</a>
    </div>
  </section>
<!-- ✅ CART DRAWER (Fixed & Solid Background) -->
<div id="cartOverlay" class="fixed inset-0 bg-black/50 hidden z-40"></div>

<aside id="cartDrawer"
  class="fixed right-0 top-0 h-full w-[85vw] sm:w-96 transform translate-x-full transition-transform duration-300 z-50 bg-white shadow-2xl rounded-l-2xl">
  
  <div class="h-full flex flex-col">
    <div class="p-4 border-b flex items-center justify-between bg-gray-50">
      <h4 class="font-semibold text-lg">Your Cart</h4>
      <button id="closeCart" class="px-2 py-1 rounded bg-gray-200 hover:bg-gray-300">Close</button>
    </div>

    <div id="cartItems" class="flex-1 overflow-auto p-4 space-y-3 bg-white"></div>

    <div class="p-4 border-t bg-gray-50">
      <div class="flex items-center justify-between mb-2">
        <div class="font-semibold">Total</div>
        <div id="cartTotal" class="font-bold text-lg">₦0</div>
      </div>
      <input id="customerEmail" 
       type="email" 
       placeholder="Email (for receipt)" 
       class="w-full px-3 py-2 rounded-lg border mb-3 text-sm focus:ring focus:ring-indigo-200" 
       required />

<textarea id="customerAddress"
          placeholder="Delivery address (optional)"
          class="w-full px-3 py-2 rounded-lg border mb-3 text-sm focus:ring focus:ring-indigo-200 resize-none"
          rows="2"></textarea>
<button id="checkoutBtn"
        class="w-full px-4 py-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-semibold transition">
  Checkout with Paystack 💳
</button>

    </div>
  </div>
</aside>


  <footer class="py-6 text-center bg-white/70 border-t mt-10 text-gray-700">
    <p>© 2025 Allinone_Collections — Thrift Wears & More 💜</p>
  </footer>

  <!-- ✅ FIREBASE + CART LOGIC -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCF2ZD-Qtc8LWzf6H2aCk2DyyGkhukrqnI",
      authDomain: "thrift-store-ab60c.firebaseapp.com",
      projectId: "thrift-store-ab60c",
      storageBucket: "thrift-store-ab60c.appspot.com",
      messagingSenderId: "858859919575",
      appId: "1:858859919575:web:aa30abf0847e3be5f2f892",
      measurementId: "G-4RBD6FBYD6"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const cartBtn = document.getElementById("cartBtn");
    const cartDrawer = document.getElementById("cartDrawer");
    const closeCart = document.getElementById("closeCart");
    const cartItemsEl = document.getElementById("cartItems");
    const cartCount = document.getElementById("cartCount");
    const cartTotalEl = document.getElementById("cartTotal");
    const checkoutBtn = document.getElementById("checkoutBtn");
   const overlay = document.getElementById("cartOverlay");

    let cart = [];

    const formatNaira = n => "₦" + n.toLocaleString();

    function renderCart() {
      cartItemsEl.innerHTML = "";
      let total = 0;
      cart.forEach((it, idx) => {
        total += it.price * it.qty;
        const row = document.createElement("div");
        row.className = "flex items-center justify-between p-2 bg-gray-50 rounded";
        row.innerHTML = `
          <div class="flex items-center gap-3">
            <img src="${it.img}" class="w-12 h-12 rounded object-cover">
            <div>
              <p class="text-sm font-semibold">${it.name}</p>
              <p class="text-xs text-gray-500">${formatNaira(it.price)}</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <button data-idx="${idx}" class="dec px-2 bg-gray-200 rounded">-</button>
            <span>${it.qty}</span>
            <button data-idx="${idx}" class="inc px-2 bg-gray-200 rounded">+</button>
            <button data-idx="${idx}" class="remove text-red-500 ml-2">Remove</button>
          </div>`;
        cartItemsEl.appendChild(row);
      });
      cartCount.textContent = cart.reduce((s, i) => s + i.qty, 0);
      cartTotalEl.textContent = formatNaira(total);

      cartItemsEl.querySelectorAll(".inc").forEach(b => b.onclick = e => { cart[e.target.dataset.idx].qty++; renderCart(); });
      cartItemsEl.querySelectorAll(".dec").forEach(b => b.onclick = e => { const i = e.target.dataset.idx; if (cart[i].qty > 1) cart[i].qty--; renderCart(); });
      cartItemsEl.querySelectorAll(".remove").forEach(b => b.onclick = e => { cart.splice(e.target.dataset.idx, 1); renderCart(); });
    }

    document.querySelectorAll(".addToCartBtn").forEach(btn => {
      btn.addEventListener("click", () => {
        const name = btn.dataset.name;
        const price = Number(btn.dataset.price);
        const img = btn.closest("article").querySelector("img").src;
        const existing = cart.find(i => i.name === name);
        if (existing) existing.qty++;
        else cart.push({ name, price, qty: 1, img });
        renderCart();
        cartDrawer.style.transform = "translateX(0)";
      });
    });
cartBtn.onclick = () => {
  cartDrawer.style.transform = "translateX(0)";
  overlay.style.display = "block";
};
closeCart.onclick = () => {
  cartDrawer.style.transform = "translateX(100%)";
  overlay.style.display = "none";
};
overlay.onclick = () => {
  cartDrawer.style.transform = "translateX(100%)";
  overlay.style.display = "none";
};

    checkoutBtn.onclick = async () => {
      const email = document.getElementById("customerEmail").value.trim();
const address = document.getElementById("customerAddress").value.trim();
if (!email) return alert("Please enter your email");
const total = cart.reduce((s, i) => s + i.price * i.qty, 0);
if (total <= 0) return alert("Your cart is empty");

const reference = "ORDER-" + Date.now();
window.launchPaystack(total, email, reference, db, cart, address);

    };
  </script>

  <!-- ✅ PAYSTACK FUNCTION (Global, not inside module) -->
  <script>
   window.launchPaystack = function(amountNaira, email, reference, db, cartItems, address = "") {

      if (typeof PaystackPop === "undefined") {
        alert("⚠️ Paystack script not loaded properly.");
        return;
      }

      const handler = PaystackPop.setup({
        key: "pk_live_3156568fc8486aec1ccbc592fac747f643f000bf", // Your live key
        email: email,
        amount: amountNaira * 100,
        ref: reference,
        currency: "NGN",
        callback: function(response) {
          // Save order to Firestore (REST API)
        fetch("https://firestore.googleapis.com/v1/projects/thrift-store-ab60c/databases/(default)/documents/orders", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    fields: {
      email: { stringValue: email },
      address: { stringValue: address || "Not provided" },
      amount: { integerValue: amountNaira },
      reference: { stringValue: response.reference },
      date: { timestampValue: new Date().toISOString() },
      status: { stringValue: "paid" },
      items: {
        arrayValue: {
          values: cartItems.map(item => ({
            mapValue: {
              fields: {
                name: { stringValue: item.name },
                qty: { integerValue: item.qty },
                price: { integerValue: item.price }
              }
            }
          }))
        }
      }
    }
  })
})

          .then(() => {
            document.getElementById("cartDrawer").style.transform = "translateX(100%)";
            alert("✅ Payment successful! Order saved.");
          })
          .catch(err => {
            console.error("Firestore save failed:", err);
            alert("⚠️ Payment done but saving order failed.");
          });
        },
        onClose: function() {
          alert("Payment window closed.");
        }
      });

      handler.openIframe();
    };
  </script>

</body>
</html>
